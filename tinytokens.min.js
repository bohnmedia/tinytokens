function TinyTokens(){this.x={},this.z=function(t,n,i){var e,r=t,s="{{("+n+"(?:::(?:(?!}}).)*)?)}}";const h=2===i.length;h&&(s+="((?:(?!{{"+n+"(?:::(?:(?!}}).)*)?}}).)*?){{/"+n+"}}");const o=new RegExp(s,"s");for(;e=r.match(o);){let t=e[1].split("::"),n=h?i(t,e[2]):i(t);n=n.replace(/{/g,String.fromCharCode(0)+"{"),r=e.input.substr(0,e.index)+n+e.input.substr(e.index+e[0].length)}return r.replace(new RegExp(String.fromCharCode(0),"g"),"")},this.addToken=function(t,n){this.x[t]=n.bind(this)},this.replace=function(t){var n=t;for(var i in this.x)n=this.z(n,i,this.x[i]);return n}}