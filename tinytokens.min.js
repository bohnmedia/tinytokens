function TinyTokens(){this.callbacks={},this.replaceTokens=function(n,t,s){var e,i=n,c="{{("+t+"(?:::(?:(?!}}).)*)?)}}";const a=2===s.length;a&&(c+="((?:(?!{{"+t+"(?:::(?:(?!}}).)*)?}}).)*?){{/"+t+"}}");const l=new RegExp(c,"s");for(;e=i.match(l);){let n=e[1].split("::"),t=a?s(n,e[2]):s(n);i=e.input.substr(0,e.index)+t+e.input.substr(e.index+e[0].length)}return i},this.addToken=function(n,t){this.callbacks[n]=t},this.replace=function(n){var t=n;for(var s in this.callbacks)t=this.replaceTokens(t,s,this.callbacks[s]);return t}}