function TinyTokens(){this.x={},this.replaceTokens=function(n,t,e){var s,i=n,r="{{("+t+"(?:::(?:(?!}}).)*)?)}}";const a=2===e.length;a&&(r+="((?:(?!{{"+t+"(?:::(?:(?!}}).)*)?}}).)*?){{/"+t+"}}");const c=new RegExp(r,"s");for(;s=i.match(c);){let y=s[1].split("::"),n=(a?e(y,s[2]):e(y))||"";n=n.replace(/{/g,String.fromCharCode(0)+"{"),i=s.input.substr(0,s.index)+n+s.input.substr(s.index+s[0].length)}return i.replace(new RegExp(String.fromCharCode(0),"g"),"")},this.addToken=function(n,t){this.x[n]=t.bind(this)},this.replace=function(n){var t=n;for(var e in this.x)t=this.replaceTokens(t,e,this.x[e]);return t}}